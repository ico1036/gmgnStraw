# GMGN 크롤러 프로젝트 - 개발 인수인계 문서

## 📋 프로젝트 개요

**프로젝트명**: GMGN 암호화폐 트래커  
**개발 목적**: GMGN 사이트에서 암호화폐 데이터를 수집하고 웹 대시보드로 모니터링  
**개발 환경**: Python 3.11, Flask, uv 패키지 매니저  
**마지막 작업일**: 2025년 8월 5일  

## 🏗️ 프로젝트 구조

```
gmgn_crawl/
├── 📁 Core Files
│   ├── gmgn_scraper.py      # 메인 데이터 수집 스크립트
│   ├── web_app.py           # Flask 웹 대시보드 (⭐ 최근 수정)
│   ├── start.py             # 사용자 메뉴 인터페이스
│   └── auto_monitor.py      # 자동 모니터링 스크립트
│
├── 📁 Data Files
│   ├── latest.json          # 최신 데이터 저장
│   └── gmgn_data_*.json     # 타임스탬프별 데이터 백업
│
├── 📁 Test Files
│   ├── test_gmgn_scraper.py # 스크래퍼 테스트
│   ├── test_integration.py  # 통합 테스트
│   └── test_web_app.py      # 웹앱 테스트
│
└── 📁 Configuration
    ├── pyproject.toml       # 프로젝트 설정
    ├── requirements.txt     # 의존성 목록
    └── pytest.ini          # 테스트 설정
```

## 🚨 최근 해결한 주요 문제: 포트 충돌 이슈

### 문제 상황
- 웹 대시보드 시작 시 "Address already in use" 오류 발생
- 5000, 5001 포트가 다른 프로세스에서 사용 중
- 사용자가 수동으로 포트를 찾아야 하는 불편함

### 구현한 해결책

#### 1. 자동 포트 탐지 시스템 (web_app.py)
```python
def find_free_port(start_port=5000, end_port=5100):
    """사용 가능한 포트를 자동으로 찾는 함수"""
    for port in range(start_port, end_port + 1):
        try:
            with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
                s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
                s.bind(('', port))
                return port
        except OSError:
            continue
    raise RuntimeError(f"포트 {start_port}-{end_port} 범위에서 사용 가능한 포트를 찾을 수 없습니다.")
```

#### 2. 기존 프로세스 자동 정리 (web_app.py)
```python
def cleanup_old_processes():
    """기존 웹앱 프로세스를 자동으로 종료"""
    # pgrep과 kill을 사용하여 중복 프로세스 정리
```

#### 3. 향상된 사용자 경험
- 동적 포트 번호 표시
- 명확한 오류 메시지
- 키보드 인터럽트 처리

## 📊 현재 상태 (2025.08.05 기준)

### ✅ 정상 작동하는 기능들
- ✅ 데이터 수집 (`gmgn_scraper.py`)
- ✅ 웹 대시보드 (`web_app.py`) - 포트 자동 탐지 적용
- ✅ 자동 모니터링 (`auto_monitor.py`)
- ✅ 사용자 메뉴 (`start.py`)
- ✅ 테스트 스위트

### 🔧 최근 수정 사항
1. **web_app.py**: 포트 충돌 해결 로직 추가
2. **start.py**: 웹 서버 시작 메시지 개선
3. 자동 포트 탐지 범위: 5000-5100

### 🧪 테스트 결과
- 웹 서버가 5001, 5002 포트에서 성공적으로 실행 확인
- 포트 충돌 시 자동으로 다음 포트로 전환 확인
- 기존 프로세스 정리 기능 작동 확인

## 🚀 실행 방법

### 1. 환경 설정
```bash
# 가상환경 활성화
source /Users/jwcorp/gmgn_crawl/.venv/bin/activate

# 의존성 설치 (필요시)
uv sync
```

### 2. 메인 메뉴 실행
```bash
python3 start.py
```

### 3. 메뉴 옵션
1. 📥 한번만 데이터 수집
2. 🌐 웹 대시보드 시작 (⭐ 포트 자동 탐지)
3. 🤖 자동 모니터링 시작 (10분마다)
4. 📄 파일 목록 보기
5. ❌ 종료

### 4. 직접 실행 (개발용)
```bash
# 웹 대시보드만 실행
python3 web_app.py

# 데이터 수집만 실행
python3 gmgn_scraper.py
```

## 🔍 주요 파일별 역할

### 핵심 실행 파일
- **`start.py`**: 사용자 인터페이스, 메뉴 제공
- **`gmgn_scraper.py`**: GMGN 사이트 크롤링, 데이터 수집
- **`web_app.py`**: Flask 웹 대시보드, 실시간 모니터링 (⭐ 포트 자동 탐지)
- **`auto_monitor.py`**: 주기적 자동 데이터 수집

### 데이터 파일
- **`latest.json`**: 가장 최신 수집 데이터
- **`gmgn_data_YYYYMMDD_HHMMSS_*.json`**: 타임스탬프별 백업

### 설정 파일
- **`pyproject.toml`**: 프로젝트 메타데이터, 의존성
- **`requirements.txt`**: pip 호환 의존성 목록

## ⚠️ 알려진 이슈 및 주의사항

### 해결된 이슈
- ✅ 포트 충돌 문제 (자동 포트 탐지로 해결)
- ✅ 중복 프로세스 실행 (자동 정리 기능으로 해결)

### 현재 주의사항
1. **가상환경**: 반드시 `.venv` 활성화 후 실행
2. **Python 버전**: `python3` 명령어 사용 (`python` 명령어는 존재하지 않음)
3. **포트 범위**: 5000-5100 포트 범위에서 자동 탐지
4. **리소스 경고**: multiprocessing에서 세마포어 관련 경고 발생 (기능상 문제없음)

## 📝 향후 개발 사항 (제안)

### 우선순위 높음
1. **데이터베이스 연동**: JSON 파일 대신 SQLite/PostgreSQL 사용
2. **알림 시스템**: 급등/급락 시 이메일/Slack 알림
3. **차트 기능**: 시간별 가격 변동 그래프

### 우선순위 중간
1. **API 확장**: RESTful API 엔드포인트 추가
2. **사용자 설정**: 모니터링 간격, 알림 임계값 설정
3. **로그 시스템**: 구조화된 로깅, 로그 파일 관리

### 우선순위 낮음
1. **UI 개선**: Bootstrap/Tailwind CSS 적용
2. **모바일 대응**: 반응형 웹 디자인
3. **백그라운드 서비스**: systemd/launchd 서비스 등록

## 🔧 개발 환경 정보

- **OS**: macOS (ARM64)
- **Python**: 3.11.11
- **패키지 매니저**: uv (UV_PROJECT_ENVIRONMENT 사용)
- **웹 프레임워크**: Flask (개발 서버)
- **테스트 프레임워크**: pytest

## 📞 기술 지원 정보

### 자주 사용하는 명령어
```bash
# 프로세스 확인
lsof -i :5000  # 특정 포트 사용 프로세스 확인
ps aux | grep python  # Python 프로세스 확인
pkill -f "web_app.py"  # 웹앱 프로세스 종료

# 테스트 실행
pytest  # 전체 테스트
pytest test_gmgn_scraper.py  # 특정 테스트

# 의존성 관리
uv add [패키지명]  # 패키지 추가
uv sync  # 의존성 동기화
```

### 프로젝트 특성
- **데이터 수집 주기**: 기본 10분 (auto_monitor.py에서 설정)
- **웹 대시보드 자동 새로고침**: 30초마다
- **포트 자동 탐지**: 5000-5100 범위

## 📚 참고 문서
- `PROJECT_PLAN.md`: 상세 프로젝트 계획서
- `PROJECT_PLAN_SIMPLE.md`: 간단 버전 계획서
- `test_summary.md`: 테스트 결과 요약
- `테스트_확인_가이드.md`: 한국어 테스트 가이드

---

**마지막 업데이트**: 2025년 8월 5일 23:05  
**주요 개선사항**: 웹 대시보드 포트 충돌 문제 완전 해결  
**상태**: 모든 핵심 기능 정상 작동 ✅