# 🧪 테스트 코드 확인 및 실행 가이드

## 📁 테스트 파일 구조
```
gmgn_crawl/
├── test_gmgn_scraper.py    # 스크래퍼 단위 테스트 (11개)
├── test_web_app.py         # 웹앱 단위 테스트 (13개)
├── test_integration.py     # 통합 테스트 (11개)
├── pytest.ini             # 테스트 설정
└── test_summary.md         # 테스트 결과 보고서
```

## 🔍 테스트 코드 내용 확인

### 1. 파일 내용 확인
```bash
# 테스트 파일 상단 확인
head -30 test_gmgn_scraper.py

# 특정 테스트 함수 찾기
grep "def test_" test_*.py

# 테스트 파일 전체 보기
cat test_gmgn_scraper.py
```

### 2. 테스트 목록만 확인 (실행 안함)
```bash
# 모든 테스트 목록
uv run pytest --collect-only -q

# 특정 파일의 테스트만
uv run pytest test_gmgn_scraper.py --collect-only -q
```

## 🚀 테스트 실행 방법

### 1. 전체 테스트 실행
```bash
# 기본 실행
uv run pytest

# 자세한 출력
uv run pytest -v

# 짧은 오류 메시지
uv run pytest --tb=short

# 한 줄 오류 메시지
uv run pytest --tb=line
```

### 2. 특정 파일만 테스트
```bash
# 스크래퍼 테스트만
uv run pytest test_gmgn_scraper.py -v

# 웹앱 테스트만
uv run pytest test_web_app.py -v

# 통합 테스트만
uv run pytest test_integration.py -v
```

### 3. 특정 테스트 함수만 실행
```bash
# 클래스::함수 형식
uv run pytest test_gmgn_scraper.py::TestGMGNScraper::test_scrape_gmgn_returns_valid_data -v

# 여러 테스트 함수
uv run pytest test_gmgn_scraper.py::TestGMGNScraper::test_scrape_gmgn_returns_valid_data test_web_app.py::TestWebApp::test_dashboard_loads_successfully -v
```

### 4. 키워드로 필터링
```bash
# "dashboard" 포함 테스트만
uv run pytest -k "dashboard" -v

# "alert" 포함 테스트만
uv run pytest -k "alert" -v

# "not slow" (slow 마크 제외)
uv run pytest -k "not slow" -v
```

### 5. 마커로 필터링
```bash
# 통합 테스트만
uv run pytest -m integration -v

# 느린 테스트만
uv run pytest -m slow -v

# 단위 테스트만 (마커가 있다면)
uv run pytest -m unit -v
```

## 📊 테스트 결과 확인

### 1. 상세한 출력 옵션
```bash
# 매우 자세한 출력
uv run pytest -vv

# 출력과 함께
uv run pytest -v -s

# 실패한 테스트만 다시 실행
uv run pytest --lf

# 처음 실패에서 중단
uv run pytest -x
```

### 2. 테스트 커버리지 (패키지 설치 필요)
```bash
# 커버리지 설치
uv add pytest-cov

# 커버리지와 함께 실행
uv run pytest --cov=gmgn_scraper --cov=web_app

# HTML 리포트 생성
uv run pytest --cov=gmgn_scraper --cov=web_app --cov-report=html
```

## 🛠️ 유용한 pytest 옵션들

### 성능 관련
```bash
# 병렬 실행 (pytest-xdist 설치 필요)
uv add pytest-xdist
uv run pytest -n auto

# 가장 느린 테스트 10개 표시
uv run pytest --durations=10
```

### 디버깅 관련
```bash
# 실패 시 pdb 디버거 실행
uv run pytest --pdb

# 첫 번째 실패에서 pdb 실행
uv run pytest --pdb -x

# 출력 캡처 비활성화
uv run pytest -s
```

### 출력 포맷
```bash
# JUnit XML 형식으로 출력
uv run pytest --junit-xml=results.xml

# JSON 형식으로 출력 (pytest-json-report 필요)
uv add pytest-json-report
uv run pytest --json-report --json-report-file=report.json
```

## 🔧 실제 사용 예시

### 개발 중 자주 사용하는 명령어들
```bash
# 1. 빠른 전체 테스트
uv run pytest --tb=line

# 2. 특정 기능 테스트 개발 중
uv run pytest test_gmgn_scraper.py -v -s

# 3. 실패한 테스트만 다시 실행
uv run pytest --lf -v

# 4. 웹앱 관련 테스트만
uv run pytest -k "web" -v

# 5. 알림 기능 테스트만
uv run pytest -k "alert" -v
```

### CI/CD에서 사용할 명령어
```bash
# 커버리지와 함께 전체 테스트
uv run pytest --cov=. --cov-report=xml --junit-xml=results.xml -v
```

## 🎯 현재 프로젝트 테스트 현황

### 테스트 통계
- **총 35개 테스트** ✅
- **스크래퍼 테스트**: 11개
- **웹앱 테스트**: 13개  
- **통합 테스트**: 11개
- **성공률**: 100% (35/35)

### 빠른 확인 명령어
```bash
# 전체 테스트 실행
uv run pytest -v

# 특정 컴포넌트만 확인
uv run pytest test_gmgn_scraper.py -v     # 스크래퍼
uv run pytest test_web_app.py -v          # 웹앱
uv run pytest test_integration.py -v      # 통합

# 대시보드 관련만
uv run pytest -k "dashboard" -v

# 알림 관련만  
uv run pytest -k "alert" -v
```